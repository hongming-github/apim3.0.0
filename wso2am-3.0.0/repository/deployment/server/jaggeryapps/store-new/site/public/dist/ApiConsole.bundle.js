(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{6175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=P(n(0)),a=P(n(28)),s=P(n(16)),u=P(n(3)),l=P(n(38)),i=n(15),c=P(n(29)),p=P(n(115)),f=P(n(201)),d=P(n(202)),h=P(n(76)),m=P(n(21)),y=P(n(203)),b=P(n(43)),g=P(n(64)),v=P(n(62)),E=P(n(52)),w=P(n(53)),k=P(n(320)),S=P(n(37)),I=P(n(6565));function P(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showToken:!1},n.handleChanges=n.handleChanges.bind(n),n.accessTokenProvider=n.accessTokenProvider.bind(n),n.handleClickShowToken=n.handleClickShowToken.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this,t=new S.default,n=this.props.match.params.api_uuid,r=t.getSwaggerByAPIId(n),o=t.getAPIById(n),a=t.getSubscriptions(n);Promise.all([o,r,a.catch(function(e){return console.error(e)})]).then(function(t){var n=t.map(function(e){return e&&e.body}),r=n[0],o=n[1],a=n[2];o.basePath=r.context,o.host="localhost:8243",e.setState({api:r,swagger:o,subscriptions:a})}).catch(function(t){404===t.status&&e.setState({notFound:!0})})}},{key:"handleClickShowToken",value:function(){var e=this.state.showToken;this.setState({showToken:!e})}},{key:"accessTokenProvider",value:function(){return this.state.accessToken}},{key:"handleChanges",value:function(e){var t=e.currentTarget,n=t.name,r=t.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,r))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.api,r=t.notFound,u=t.swagger,i=t.accessToken,S=t.showToken,P=t.subscriptions,T=h.default.getUser();return null==n||null==u?o.default.createElement(k.default,null):r?"API Not found !":o.default.createElement(o.default.Fragment,null,o.default.createElement(a.default,{container:!0,className:e.grid},!T&&o.default.createElement(a.default,{item:!0,md:6},o.default.createElement(m.default,{className:e.userNotificationPaper},o.default.createElement(s.default,{variant:"h5",component:"h3"},o.default.createElement(y.default,null)," ","Notice"),o.default.createElement(s.default,{component:"p"},"You require an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."))),P&&P.list.length>0&&o.default.createElement(a.default,{container:!0},o.default.createElement(a.default,{item:!0,md:3},o.default.createElement(s.default,{variant:"subheading",gutterleft:!0},"Select Application")),o.default.createElement(a.default,{item:!0,md:9},o.default.createElement(E.default,{className:e.formControl},o.default.createElement(g.default,{htmlFor:"subscriptions-selection"},"Subscribed applications"),o.default.createElement(w.default,{autoWidth:!0,name:"selectedSubscribedApplication",value:P.list[0].applicationInfo.applicationId,onChange:this.handleChanges,input:o.default.createElement(b.default,{name:"subscription",id:"subscriptions-selection"})},P.list.map(function(e){return o.default.createElement(v.default,{value:e.applicationInfo.applicationId},e.applicationInfo.name)}))))),o.default.createElement(a.default,{container:!0},o.default.createElement(a.default,{item:!0,md:3},o.default.createElement(s.default,{variant:"subheading",gutterleft:!0},"Set Request Header")),o.default.createElement(a.default,{item:!0,md:9},o.default.createElement(l.default,{margin:"normal",variant:"outlined",className:e.inputText,label:"Access Token",name:"accessToken",onChange:this.handleChanges,type:S?"text":"password",value:i,helperText:"Enter access token",InputProps:{endAdornment:o.default.createElement(p.default,{position:"end"},o.default.createElement(c.default,{edge:"end","aria-label":"Toggle token visibility",onClick:this.handleClickShowToken},S?o.default.createElement(d.default,null):o.default.createElement(f.default,null))),startAdornment:o.default.createElement(p.default,{className:e.inputAdornmentStart,position:"start"},n.authorizationHeader?n.authorizationHeader:"Authorization"," ",":Bearer")}})))),o.default.createElement(I.default,{accessTokenProvider:this.accessTokenProvider,spec:u}))}}]),t}();T.defaultProps={},T.propTypes={classes:u.default.shape({}).isRequired},t.default=(0,i.withStyles)({inputAdornmentStart:{width:"100%"},inputText:{marginLeft:"40px",minWidth:"400px"},grid:{spacing:20,marginTop:"30px",marginBottom:"30px",paddingLeft:"90px"},userNotificationPaper:{padding:"20px"}})(T)},6565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=s(n(3));n(6566);var a=s(n(6568));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){return{wrapComponents:{authorizeBtn:function(){return function(){return null}},info:function(){return function(){return null}}}}},l=function(e){var t=e.spec,n=e.accessTokenProvider,o={spec:t,validatorUrl:null,docExpansion:"list",defaultModelsExpandDepth:0,requestInterceptor:function(e){return e.headers.Authorization="Bearer "+n(),e},presets:[u],plugins:null};return r.default.createElement(a.default,o)};l.propTypes={spec:o.default.shape({}).isRequired},t.default=l},6568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(0)),s=i(n(3)),u=n(6569),l=i(u);function i(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.requestInterceptor=function(e){return"function"==typeof n.props.requestInterceptor?n.props.requestInterceptor(e):e},n.responseInterceptor=function(e){return"function"==typeof n.props.responseInterceptor?n.props.responseInterceptor(e):e},n.onComplete=function(){if("function"==typeof n.props.onComplete)return n.props.onComplete(n.system)},n.SwaggerUIComponent=null,n.system=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),o(t,[{key:"componentDidMount",value:function(){var e=(0,l.default)({spec:this.props.spec,url:this.props.url,defaultModelsExpandDepth:this.props.defaultModelsExpandDepth,presets:[u.presets.apis].concat(c(this.props.presets)),requestInterceptor:this.requestInterceptor,responseInterceptor:this.responseInterceptor,onComplete:this.onComplete,docExpansion:this.props.docExpansion});this.system=e,this.SwaggerUIComponent=e.getComponent("App","root"),this.forceUpdate()}},{key:"componentDidUpdate",value:function(e){this.props.url!==e.url&&(this.system.specActions.updateSpec(""),this.props.url&&(this.system.specActions.updateUrl(this.props.url),this.system.specActions.download(this.props.url))),this.props.spec!==e.spec&&this.props.spec&&("object"===r(this.props.spec)?this.system.specActions.updateSpec(JSON.stringify(this.props.spec)):this.system.specActions.updateSpec(this.props.spec))}},{key:"render",value:function(){return this.SwaggerUIComponent?a.default.createElement(this.SwaggerUIComponent,null):null}}]),t}();t.default=p,p.defaultProps={docExpansion:"list",defaultModelsExpandDepth:1,presets:[]},p.propTypes={spec:s.default.oneOf([s.default.string,s.default.object]),url:s.default.string,defaultModelsExpandDepth:s.default.number,requestInterceptor:s.default.func,responseInterceptor:s.default.func,onComplete:s.default.func,docExpansion:s.default.oneOf(["list","full","none"]),presets:s.default.arrayOf(s.default.func)}},6679:function(e,t){},6681:function(e,t){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zb3VyY2Uvc3JjL2FwcC9jb21wb25lbnRzL0FwaXMvRGV0YWlscy9BcGlDb25zb2xlL0FwaUNvbnNvbGUuanN4Iiwid2VicGFjazovLy8uL3NvdXJjZS9zcmMvYXBwL2NvbXBvbmVudHMvQXBpcy9EZXRhaWxzL0FwaUNvbnNvbGUvU3dhZ2dlclVJLmpzeCIsIndlYnBhY2s6Ly8vLi9zb3VyY2Uvc3JjL2FwcC9jb21wb25lbnRzL0FwaXMvRGV0YWlscy9BcGlDb25zb2xlL1BhdGNoZWRTd2FnZ2VyVUlSZWFjdC5qc3giXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9zdHlsZXMiLCJBcGlDb25zb2xlIiwicHJvcHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3RoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiY2FsbCIsInN0YXRlIiwic2hvd1Rva2VuIiwiaGFuZGxlQ2hhbmdlcyIsImJpbmQiLCJhY2Nlc3NUb2tlblByb3ZpZGVyIiwiaGFuZGxlQ2xpY2tTaG93VG9rZW4iLCJSZWFjdCIsIkNvbXBvbmVudCIsIl90aGlzMiIsImFwaSIsIkFwaSIsImFwaUlEIiwibWF0Y2giLCJwYXJhbXMiLCJhcGlfdXVpZCIsInByb21pc2VkU3dhZ2dlciIsImdldFN3YWdnZXJCeUFQSUlkIiwicHJvbWlzZWRBUEkiLCJnZXRBUElCeUlkIiwicHJvbWlzZWRTdWJzY3JpcHRpb25zIiwiZ2V0U3Vic2NyaXB0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsInRoZW4iLCJyZXNwb25zZXMiLCJkYXRhIiwibWFwIiwicmVzcG9uc2UiLCJib2R5IiwiYXBpT2JqIiwic3dhZ2dlciIsInN1YnNjcmlwdGlvbnMiLCJiYXNlUGF0aCIsImNvbnRleHQiLCJob3N0Iiwic2V0U3RhdGUiLCJzdGF0dXMiLCJub3RGb3VuZCIsImFjY2Vzc1Rva2VuIiwiZXZlbnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwibmFtZSIsInZhbHVlIiwiX2RlZmluZVByb3BlcnR5IiwiY2xhc3NlcyIsIl9zdGF0ZSIsInVzZXIiLCJBdXRoTWFuYWdlciIsImdldFVzZXIiLCJfcmVhY3QyIiwiZGVmYXVsdCIsImNyZWF0ZUVsZW1lbnQiLCJfUHJvZ3Jlc3MyIiwiRnJhZ21lbnQiLCJfR3JpZDIiLCJjb250YWluZXIiLCJjbGFzc05hbWUiLCJncmlkIiwiaXRlbSIsIm1kIiwiX1BhcGVyMiIsInVzZXJOb3RpZmljYXRpb25QYXBlciIsIl9UeXBvZ3JhcGh5MiIsInZhcmlhbnQiLCJjb21wb25lbnQiLCJfV2FybmluZzIiLCJsaXN0IiwibGVuZ3RoIiwiZ3V0dGVybGVmdCIsIl9Gb3JtQ29udHJvbDIiLCJmb3JtQ29udHJvbCIsIl9JbnB1dExhYmVsMiIsImh0bWxGb3IiLCJfU2VsZWN0MiIsImF1dG9XaWR0aCIsImFwcGxpY2F0aW9uSW5mbyIsImFwcGxpY2F0aW9uSWQiLCJvbkNoYW5nZSIsImlucHV0IiwiX0lucHV0MiIsImlkIiwic3ViIiwiX01lbnVJdGVtMiIsIl9UZXh0RmllbGQyIiwibWFyZ2luIiwiaW5wdXRUZXh0IiwibGFiZWwiLCJ0eXBlIiwiaGVscGVyVGV4dCIsIklucHV0UHJvcHMiLCJlbmRBZG9ybm1lbnQiLCJfSW5wdXRBZG9ybm1lbnQyIiwicG9zaXRpb24iLCJfSWNvbkJ1dHRvbjIiLCJlZGdlIiwiYXJpYS1sYWJlbCIsIm9uQ2xpY2siLCJfVmlzaWJpbGl0eU9mZjIiLCJfVmlzaWJpbGl0eTIiLCJzdGFydEFkb3JubWVudCIsImlucHV0QWRvcm5tZW50U3RhcnQiLCJhdXRob3JpemF0aW9uSGVhZGVyIiwiX1N3YWdnZXJVSTIiLCJzcGVjIiwiZGVmYXVsdFByb3BzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic2hhcGUiLCJpc1JlcXVpcmVkIiwid2l0aFN0eWxlcyIsIndpZHRoIiwibWFyZ2luTGVmdCIsIm1pbldpZHRoIiwic3BhY2luZyIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsInBhZGRpbmdMZWZ0IiwicGFkZGluZyIsImRpc2FibGVBdXRob3JpemVBbmRJbmZvUGx1Z2luIiwid3JhcENvbXBvbmVudHMiLCJhdXRob3JpemVCdG4iLCJpbmZvIiwiU3dhZ2dlclVJIiwiY29tcG9uZW50UHJvcHMiLCJ2YWxpZGF0b3JVcmwiLCJkb2NFeHBhbnNpb24iLCJkZWZhdWx0TW9kZWxzRXhwYW5kRGVwdGgiLCJyZXF1ZXN0SW50ZXJjZXB0b3IiLCJyZXEiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInByZXNldHMiLCJwbHVnaW5zIiwiX1BhdGNoZWRTd2FnZ2VyVUlSZWFjdDIiLCJfc3dhZ2dlclVpIiwicmVzcG9uc2VJbnRlcmNlcHRvciIsInJlcyIsIm9uQ29tcGxldGUiLCJzeXN0ZW0iLCJTd2FnZ2VyVUlDb21wb25lbnQiLCJ1aSIsIl9zd2FnZ2VyVWkyIiwidXJsIiwiYXBpcyIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsImdldENvbXBvbmVudCIsImZvcmNlVXBkYXRlIiwicHJldlByb3BzIiwic3BlY0FjdGlvbnMiLCJ1cGRhdGVTcGVjIiwidXBkYXRlVXJsIiwiZG93bmxvYWQiLCJfdHlwZW9mIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9uZU9mIiwic3RyaW5nIiwib2JqZWN0IiwibnVtYmVyIiwiZnVuYyIsImFycmF5T2YiXSwibWFwcGluZ3MiOiJ5WUFrQkFBLEVBQUEsUUFDQUEsRUFBQSxTQUNBQSxFQUFBLFNBQ0FBLEVBQUEsUUFDQUEsRUFBQSxLQUNBQyxFQUFBRCxFQUFBLFFBQ0FBLEVBQUEsU0FDQUEsRUFBQSxVQUNBQSxFQUFBLFVBQ0FBLEVBQUEsVUFDQUEsRUFBQSxTQUNBQSxFQUFBLFNBQ0FBLEVBQUEsVUFDQUEsRUFBQSxTQUNBQSxFQUFBLFNBQ0FBLEVBQUEsU0FDQUEsRUFBQSxTQUNBQSxFQUFBLFNBRUFBLEVBQUEsVUFDQUEsRUFBQSxTQUNBQSxFQUFBLDBEQU9B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cEMsVUFBVW1ELE9BQ2YvQix5QkFBMEJwQixVQUFVcUQsT0FDcENoQyxtQkFBb0JyQixVQUFVc0QsS0FDOUJ6QixvQkFBcUI3QixVQUFVc0QsS0FDL0J2QixXQUFZL0IsVUFBVXNELEtBQ3RCbkMsYUFBY25CLFVBQVVrRCxNQUFNLENBQUMsT0FBUSxPQUFRLFNBQy9DekIsUUFBU3pCLFVBQVV1RCxRQUFRdkQsVUFBVXNEIiwiZmlsZSI6IkFwaUNvbnNvbGUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOSwgV1NPMiBJbmMuIChodHRwOi8vd3d3LndzbzIub3JnKSBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFdTTzIgSW5jLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSxcbiAqIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdFxuICogaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBHcmlkIGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL0dyaWQnO1xuaW1wb3J0IFR5cG9ncmFwaHkgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvVHlwb2dyYXBoeSc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9UZXh0RmllbGQnO1xuaW1wb3J0IHsgd2l0aFN0eWxlcyB9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL3N0eWxlcyc7XG5pbXBvcnQgSWNvbkJ1dHRvbiBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9JY29uQnV0dG9uJztcbmltcG9ydCBJbnB1dEFkb3JubWVudCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9JbnB1dEFkb3JubWVudCc7XG5pbXBvcnQgVmlzaWJpbGl0eSBmcm9tICdAbWF0ZXJpYWwtdWkvaWNvbnMvVmlzaWJpbGl0eSc7XG5pbXBvcnQgVmlzaWJpbGl0eU9mZiBmcm9tICdAbWF0ZXJpYWwtdWkvaWNvbnMvVmlzaWJpbGl0eU9mZic7XG5pbXBvcnQgQXV0aE1hbmFnZXIgZnJvbSAnQXBwRGF0YS9BdXRoTWFuYWdlcic7XG5pbXBvcnQgUGFwZXIgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvUGFwZXInO1xuaW1wb3J0IFdhcm5pbmdJY29uIGZyb20gJ0BtYXRlcmlhbC11aS9pY29ucy9XYXJuaW5nJztcbmltcG9ydCBJbnB1dCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9JbnB1dCc7XG5pbXBvcnQgSW5wdXRMYWJlbCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9JbnB1dExhYmVsJztcbmltcG9ydCBNZW51SXRlbSBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9NZW51SXRlbSc7XG5pbXBvcnQgRm9ybUNvbnRyb2wgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvRm9ybUNvbnRyb2wnO1xuaW1wb3J0IFNlbGVjdCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9TZWxlY3QnO1xuXG5pbXBvcnQgUHJvZ3Jlc3MgZnJvbSAnLi4vLi4vLi4vU2hhcmVkL1Byb2dyZXNzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vLi4vLi4vLi4vZGF0YS9hcGknO1xuaW1wb3J0IFN3YWdnZXJVSSBmcm9tICcuL1N3YWdnZXJVSSc7XG5cbi8qKlxuICpcbiAqXG4gKiBAcGFyYW0geyp9IHRoZW1lXG4gKi9cbmNvbnN0IHN0eWxlcyA9IHtcbiAgICBpbnB1dEFkb3JubWVudFN0YXJ0OiB7XG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgfSxcbiAgICBpbnB1dFRleHQ6IHtcbiAgICAgICAgbWFyZ2luTGVmdDogJzQwcHgnLFxuICAgICAgICBtaW5XaWR0aDogJzQwMHB4JyxcbiAgICB9LFxuICAgIGdyaWQ6IHtcbiAgICAgICAgc3BhY2luZzogMjAsXG4gICAgICAgIG1hcmdpblRvcDogJzMwcHgnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICczMHB4JyxcbiAgICAgICAgcGFkZGluZ0xlZnQ6ICc5MHB4JyxcbiAgICB9LFxuICAgIHVzZXJOb3RpZmljYXRpb25QYXBlcjoge1xuICAgICAgICBwYWRkaW5nOiAnMjBweCcsXG4gICAgfSxcbn07XG4vKipcbiAqXG4gKlxuICogQGNsYXNzIEFwaUNvbnNvbGVcbiAqIEBleHRlbmRzIHtSZWFjdC5Db21wb25lbnR9XG4gKi9cbmNsYXNzIEFwaUNvbnNvbGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIC8qKlxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBBcGlDb25zb2xlLlxuICAgICAqIEBwYXJhbSB7Kn0gcHJvcHNcbiAgICAgKiBAbWVtYmVyb2YgQXBpQ29uc29sZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsgc2hvd1Rva2VuOiBmYWxzZSB9O1xuICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZXMgPSB0aGlzLmhhbmRsZUNoYW5nZXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlblByb3ZpZGVyID0gdGhpcy5hY2Nlc3NUb2tlblByb3ZpZGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tTaG93VG9rZW4gPSB0aGlzLmhhbmRsZUNsaWNrU2hvd1Rva2VuLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBBcGlDb25zb2xlXG4gICAgICovXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGNvbnN0IGFwaSA9IG5ldyBBcGkoKTtcbiAgICAgICAgY29uc3QgeyBtYXRjaCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgYXBpSUQgPSBtYXRjaC5wYXJhbXMuYXBpX3V1aWQ7XG4gICAgICAgIGNvbnN0IHByb21pc2VkU3dhZ2dlciA9IGFwaS5nZXRTd2FnZ2VyQnlBUElJZChhcGlJRCk7XG4gICAgICAgIGNvbnN0IHByb21pc2VkQVBJID0gYXBpLmdldEFQSUJ5SWQoYXBpSUQpO1xuICAgICAgICBjb25zdCBwcm9taXNlZFN1YnNjcmlwdGlvbnMgPSBhcGkuZ2V0U3Vic2NyaXB0aW9ucyhhcGlJRCk7XG5cbiAgICAgICAgUHJvbWlzZS5hbGwoW3Byb21pc2VkQVBJLCBwcm9taXNlZFN3YWdnZXIsIHByb21pc2VkU3Vic2NyaXB0aW9ucy5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSldKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZXMubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlICYmIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwaU9iaiA9IGRhdGFbMF07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3dhZ2dlciA9IGRhdGFbMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IGRhdGFbMl07XG5cbiAgICAgICAgICAgICAgICBzd2FnZ2VyLmJhc2VQYXRoID0gYXBpT2JqLmNvbnRleHQ7XG4gICAgICAgICAgICAgICAgc3dhZ2dlci5ob3N0ID0gJ2xvY2FsaG9zdDo4MjQzJztcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgYXBpOiBhcGlPYmosIHN3YWdnZXIsIHN1YnNjcmlwdGlvbnMgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IGVycm9yO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbm90Rm91bmQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBBcGlDb25zb2xlXG4gICAgICovXG4gICAgaGFuZGxlQ2xpY2tTaG93VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgc2hvd1Rva2VuIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1Rva2VuOiAhc2hvd1Rva2VuIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqIEBtZW1iZXJvZiBBcGlDb25zb2xlXG4gICAgICovXG4gICAgYWNjZXNzVG9rZW5Qcm92aWRlcigpIHtcbiAgICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgQXBpQ29uc29sZVxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZXMoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgW25hbWVdOiB2YWx1ZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKiBAbWVtYmVyb2YgQXBpQ29uc29sZVxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBjbGFzc2VzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhcGksIG5vdEZvdW5kLCBzd2FnZ2VyLCBhY2Nlc3NUb2tlbiwgc2hvd1Rva2VuLCBzdWJzY3JpcHRpb25zLFxuICAgICAgICB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgY29uc3QgdXNlciA9IEF1dGhNYW5hZ2VyLmdldFVzZXIoKTtcblxuICAgICAgICBpZiAoYXBpID09IG51bGwgfHwgc3dhZ2dlciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gPFByb2dyZXNzIC8+O1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RGb3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuICdBUEkgTm90IGZvdW5kICEnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICA8R3JpZCBjb250YWluZXIgY2xhc3NOYW1lPXtjbGFzc2VzLmdyaWR9PlxuICAgICAgICAgICAgICAgICAgICB7IXVzZXIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyaWQgaXRlbSBtZD17Nn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBhcGVyIGNsYXNzTmFtZT17Y2xhc3Nlcy51c2VyTm90aWZpY2F0aW9uUGFwZXJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PSdoNScgY29tcG9uZW50PSdoMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8V2FybmluZ0ljb24gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnICd9XG5Ob3RpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UeXBvZ3JhcGh5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHlwb2dyYXBoeSBjb21wb25lbnQ9J3AnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91IHJlcXVpcmUgYW4gYWNjZXNzIHRva2VuIHRvIHRyeSB0aGUgQVBJLiBQbGVhc2UgbG9nIGluIGFuZCBzdWJzY3JpYmUgdG8gdGhlIEFQSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gZ2VuZXJhdGUgYW4gYWNjZXNzIHRva2VuLiBJZiB5b3UgYWxyZWFkeSBoYXZlIGFuIGFjY2VzcyB0b2tlbiwgcGxlYXNlIHByb3ZpZGUgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlbG93LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9QYXBlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JpZD5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3N1YnNjcmlwdGlvbnMgJiYgc3Vic2NyaXB0aW9ucy5saXN0Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyaWQgY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxHcmlkIGl0ZW0gbWQ9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PSdzdWJoZWFkaW5nJyBndXR0ZXJsZWZ0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0IEFwcGxpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0dyaWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyaWQgaXRlbSBtZD17OX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbCBjbGFzc05hbWU9e2NsYXNzZXMuZm9ybUNvbnRyb2x9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TGFiZWwgaHRtbEZvcj0nc3Vic2NyaXB0aW9ucy1zZWxlY3Rpb24nPlN1YnNjcmliZWQgYXBwbGljYXRpb25zPC9JbnB1dExhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9XaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J3NlbGVjdGVkU3Vic2NyaWJlZEFwcGxpY2F0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzdWJzY3JpcHRpb25zLmxpc3RbMF0uYXBwbGljYXRpb25JbmZvLmFwcGxpY2F0aW9uSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dD17PElucHV0IG5hbWU9J3N1YnNjcmlwdGlvbicgaWQ9J3N1YnNjcmlwdGlvbnMtc2VsZWN0aW9uJyAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3Vic2NyaXB0aW9ucy5saXN0Lm1hcChzdWIgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWVudUl0ZW0gdmFsdWU9e3N1Yi5hcHBsaWNhdGlvbkluZm8uYXBwbGljYXRpb25JZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3ViLmFwcGxpY2F0aW9uSW5mby5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9HcmlkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9HcmlkPlxuICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgIDxHcmlkIGNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxHcmlkIGl0ZW0gbWQ9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUeXBvZ3JhcGh5IHZhcmlhbnQ9J3N1YmhlYWRpbmcnIGd1dHRlcmxlZnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldCBSZXF1ZXN0IEhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JpZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxHcmlkIGl0ZW0gbWQ9ezl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luPSdub3JtYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuaW5wdXRUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD0nQWNjZXNzIFRva2VuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdhY2Nlc3NUb2tlbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17c2hvd1Rva2VuID8gJ3RleHQnIDogJ3Bhc3N3b3JkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2FjY2Vzc1Rva2VufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJUZXh0PSdFbnRlciBhY2Nlc3MgdG9rZW4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElucHV0UHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEFkb3JubWVudDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEFkb3JubWVudCBwb3NpdGlvbj0nZW5kJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2U9J2VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J1RvZ2dsZSB0b2tlbiB2aXNpYmlsaXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja1Nob3dUb2tlbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dUb2tlbiA/IDxWaXNpYmlsaXR5T2ZmIC8+IDogPFZpc2liaWxpdHkgLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvSWNvbkJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0QWRvcm5tZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QWRvcm5tZW50OiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0QWRvcm5tZW50IGNsYXNzTmFtZT17Y2xhc3Nlcy5pbnB1dEFkb3JubWVudFN0YXJ0fSBwb3NpdGlvbj0nc3RhcnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXBpLmF1dGhvcml6YXRpb25IZWFkZXIgPyBhcGkuYXV0aG9yaXphdGlvbkhlYWRlciA6ICdBdXRob3JpemF0aW9uJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOkJlYXJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvSW5wdXRBZG9ybm1lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0dyaWQ+XG4gICAgICAgICAgICAgICAgICAgIDwvR3JpZD5cbiAgICAgICAgICAgICAgICA8L0dyaWQ+XG4gICAgICAgICAgICAgICAgPFN3YWdnZXJVSSBhY2Nlc3NUb2tlblByb3ZpZGVyPXt0aGlzLmFjY2Vzc1Rva2VuUHJvdmlkZXJ9IHNwZWM9e3N3YWdnZXJ9IC8+XG4gICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQXBpQ29uc29sZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgLy8gaGFuZGxlSW5wdXRzOiBmYWxzZSxcbn07XG5cbkFwaUNvbnNvbGUucHJvcFR5cGVzID0ge1xuICAgIC8vIGhhbmRsZUlucHV0czogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMsIFByb3BUeXBlcy5ib29sXSksXG4gICAgY2xhc3NlczogUHJvcFR5cGVzLnNoYXBlKHt9KS5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFN0eWxlcyhzdHlsZXMpKEFwaUNvbnNvbGUpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgJ3N3YWdnZXItdWkvZGlzdC9zd2FnZ2VyLXVpLmNzcyc7XG5pbXBvcnQgU3dhZ2dlclVJTGliIGZyb20gJy4vUGF0Y2hlZFN3YWdnZXJVSVJlYWN0JztcblxuY29uc3QgZGlzYWJsZUF1dGhvcml6ZUFuZEluZm9QbHVnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd3JhcENvbXBvbmVudHM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6ZUJ0bjogKCkgPT4gKCkgPT4gbnVsbCxcbiAgICAgICAgICAgIGluZm86ICgpID0+ICgpID0+IG51bGwsXG4gICAgICAgIH0sXG4gICAgfTtcbn07XG4vKipcbiAqXG4gKiBAY2xhc3MgU3dhZ2dlclVJXG4gKiBAZXh0ZW5kcyB7Q29tcG9uZW50fVxuICovXG5jb25zdCBTd2FnZ2VyVUkgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHNwZWMsIGFjY2Vzc1Rva2VuUHJvdmlkZXIgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgY29tcG9uZW50UHJvcHMgPSB7XG4gICAgICAgIHNwZWMsXG4gICAgICAgIHZhbGlkYXRvclVybDogbnVsbCxcbiAgICAgICAgZG9jRXhwYW5zaW9uOiAnbGlzdCcsXG4gICAgICAgIGRlZmF1bHRNb2RlbHNFeHBhbmREZXB0aDogMCxcbiAgICAgICAgcmVxdWVzdEludGVyY2VwdG9yOiAocmVxKSA9PiB7XG4gICAgICAgICAgICByZXEuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYWNjZXNzVG9rZW5Qcm92aWRlcigpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcTtcbiAgICAgICAgfSxcblxuICAgICAgICBwcmVzZXRzOiBbZGlzYWJsZUF1dGhvcml6ZUFuZEluZm9QbHVnaW5dLFxuICAgICAgICBwbHVnaW5zOiBudWxsLFxuICAgIH07XG4gICAgcmV0dXJuIDxTd2FnZ2VyVUlMaWIgey4uLmNvbXBvbmVudFByb3BzfSAvPjtcbn07XG5cblN3YWdnZXJVSS5wcm9wVHlwZXMgPSB7XG4gICAgc3BlYzogUHJvcFR5cGVzLnNoYXBlKHt9KS5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgU3dhZ2dlclVJO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgc3dhZ2dlclVJQ29uc3RydWN0b3IsIHsgcHJlc2V0cyB9IGZyb20gJ3N3YWdnZXItdWknO1xuXG4vKipcbiAqXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIFN3YWdnZXJVSVxuICogQGV4dGVuZHMge1JlYWN0LkNvbXBvbmVudH1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3dhZ2dlclVJIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuU3dhZ2dlclVJQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zeXN0ZW0gPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgU3dhZ2dlclVJXG4gICAgICovXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHVpID0gc3dhZ2dlclVJQ29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgc3BlYzogdGhpcy5wcm9wcy5zcGVjLFxuICAgICAgICAgICAgdXJsOiB0aGlzLnByb3BzLnVybCxcbiAgICAgICAgICAgIGRlZmF1bHRNb2RlbHNFeHBhbmREZXB0aDogdGhpcy5wcm9wcy5kZWZhdWx0TW9kZWxzRXhwYW5kRGVwdGgsXG4gICAgICAgICAgICBwcmVzZXRzOiBbcHJlc2V0cy5hcGlzLCAuLi50aGlzLnByb3BzLnByZXNldHNdLFxuICAgICAgICAgICAgcmVxdWVzdEludGVyY2VwdG9yOiB0aGlzLnJlcXVlc3RJbnRlcmNlcHRvcixcbiAgICAgICAgICAgIHJlc3BvbnNlSW50ZXJjZXB0b3I6IHRoaXMucmVzcG9uc2VJbnRlcmNlcHRvcixcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IHRoaXMub25Db21wbGV0ZSxcbiAgICAgICAgICAgIGRvY0V4cGFuc2lvbjogdGhpcy5wcm9wcy5kb2NFeHBhbnNpb24sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc3lzdGVtID0gdWk7XG4gICAgICAgIHRoaXMuU3dhZ2dlclVJQ29tcG9uZW50ID0gdWkuZ2V0Q29tcG9uZW50KCdBcHAnLCAncm9vdCcpO1xuXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBwcmV2UHJvcHNcbiAgICAgKiBAbWVtYmVyb2YgU3dhZ2dlclVJXG4gICAgICovXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy51cmwgIT09IHByZXZQcm9wcy51cmwpIHtcbiAgICAgICAgICAgIC8vIGZsdXNoIGN1cnJlbnQgY29udGVudFxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY0FjdGlvbnMudXBkYXRlU3BlYygnJyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnVybCkge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgaW50ZXJuYWwgVVJMXG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY0FjdGlvbnMudXBkYXRlVXJsKHRoaXMucHJvcHMudXJsKTtcbiAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIHJlbW90ZSBkZWZpbml0aW9uIGZldGNoXG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY0FjdGlvbnMuZG93bmxvYWQodGhpcy5wcm9wcy51cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc3BlYyAhPT0gcHJldlByb3BzLnNwZWMgJiYgdGhpcy5wcm9wcy5zcGVjKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMuc3BlYyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbS5zcGVjQWN0aW9ucy51cGRhdGVTcGVjKEpTT04uc3RyaW5naWZ5KHRoaXMucHJvcHMuc3BlYykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbS5zcGVjQWN0aW9ucy51cGRhdGVTcGVjKHRoaXMucHJvcHMuc3BlYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0SW50ZXJjZXB0b3IgPSAocmVxKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5yZXF1ZXN0SW50ZXJjZXB0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnJlcXVlc3RJbnRlcmNlcHRvcihyZXEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXE7XG4gICAgfTtcblxuICAgIHJlc3BvbnNlSW50ZXJjZXB0b3IgPSAocmVzKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5yZXNwb25zZUludGVyY2VwdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5yZXNwb25zZUludGVyY2VwdG9yKHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uQ29tcGxldGUodGhpcy5zeXN0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU3dhZ2dlclVJQ29tcG9uZW50ID8gPHRoaXMuU3dhZ2dlclVJQ29tcG9uZW50IC8+IDogbnVsbDtcbiAgICB9XG59XG5Td2FnZ2VyVUkuZGVmYXVsdFByb3BzID0ge1xuICAgIGRvY0V4cGFuc2lvbjogJ2xpc3QnLFxuICAgIGRlZmF1bHRNb2RlbHNFeHBhbmREZXB0aDogMSxcbiAgICBwcmVzZXRzOiBbXSxcbn07XG5cblN3YWdnZXJVSS5wcm9wVHlwZXMgPSB7XG4gICAgc3BlYzogUHJvcFR5cGVzLm9uZU9mKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMub2JqZWN0XSksXG4gICAgdXJsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGRlZmF1bHRNb2RlbHNFeHBhbmREZXB0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgICByZXF1ZXN0SW50ZXJjZXB0b3I6IFByb3BUeXBlcy5mdW5jLFxuICAgIHJlc3BvbnNlSW50ZXJjZXB0b3I6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuICAgIGRvY0V4cGFuc2lvbjogUHJvcFR5cGVzLm9uZU9mKFsnbGlzdCcsICdmdWxsJywgJ25vbmUnXSksXG4gICAgcHJlc2V0czogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=